<head>
  <title>continuous-swiss</title>
</head>

<body>
  <form class="addPlayer">
    <input type="text" name="playerName" placeholder="New player name">
  </form>
  <button type="button" class="clear">Clear DB</button>

  <div class="container">
    <div class="column">
      <h3>Playing</h3>
      {{#each playing}}
        <form class="winPlayer">
          <input type="hidden" name="pairingId" value="{{_id}}"> 
          <label><input type="radio" name="winner" value="player1"> {{player1Name}}</label><br/>
          <label><input type="radio" name="winner" value="player2"> {{player2Name}}</label><br/>
          <button type="submit">Submit</button>
        </form>
      {{/each}}

      <h3>Waiting</h3>
      <table class="waiting">
      {{#each waiting}}
        <tr>
        {{#if player1Id}}
          <td>
            <form class="dequeueWaiting" id="waiting{{player1Id}}">
              <input type="hidden" name="pairingId" value="{{_id}}">
              <input type="hidden" name="quitter" value="player1">
              {{player1Name}}
            </form>
          </td><td><button type="submit" form="waiting{{player1Id}}">Dequeue</button></td>
        {{else}}
          <td>?</td>
        {{/if}}
        </tr>
        <tr>
        {{#if player2Id}}
          <td>
            <form class="dequeueWaiting" id="waiting{{player2Id}}">
              <input type="hidden" name="pairingId" value="{{_id}}">
              <input type="hidden" name="quitter" value="player2">
              {{player2Name}}
            </form>
          </td><td><button type="submit" form="waiting{{player2Id}}">Dequeue</button></td>
        {{else}}
          <td>?</td>
        {{/if}}
        </tr>
        <tr></tr>
      {{/each}}
      </table>

      <h3>Matchmaking</h3>
      {{#each matchmaking}}
        <div>
          {{name}} <button class="dequeueMatchmaking" type="button" value="{{_id}}">Dequeue</button>
        </div>
      {{/each}}

      <h3>Unqueued</h3>
      {{#each unqueued}}
        <div>
          {{name}}
          <button class="queuePlayer" type="button" value="{{_id}}">Queue</button>
          {{#unless games}}
            <button class="removePlayer" type="button" value="{{_id}}">Remove</button>
          {{/unless}}
        </div>
      {{/each}}
    </div>
    <div class="column">
      <h3>Standings</h3>
      <table class="standings">
        <thead>
          <tr><td>Name</td><td>Score</td><td>W</td><td>L</td></tr>
        </thead>
        <tbody>
          {{#each standings}}
            <tr>
              <td>{{name}}</td>
              <td>{{score}}</td>
              <td>{{wins}}</td>
              <td>{{losses}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</body>
